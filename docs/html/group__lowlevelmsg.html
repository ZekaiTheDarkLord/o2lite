<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>O2: Low-Level Message Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">O2
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Inter-process communication system for media applications</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Low-Level Message Interface</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga941ccda940ce31ada3f3b970d2b9e861"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861">o2_start_send</a> ()</td></tr>
<tr class="memdesc:ga941ccda940ce31ada3f3b970d2b9e861"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare to build a message.  <a href="#ga941ccda940ce31ada3f3b970d2b9e861">More...</a><br /></td></tr>
<tr class="separator:ga941ccda940ce31ada3f3b970d2b9e861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0598088671f5ab3d9e6e8bb98f7ff58d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga0598088671f5ab3d9e6e8bb98f7ff58d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga0598088671f5ab3d9e6e8bb98f7ff58d">o2_add_int32</a> (int32_t i)</td></tr>
<tr class="memdesc:ga0598088671f5ab3d9e6e8bb98f7ff58d"><td class="mdescLeft">&#160;</td><td class="mdescRight">add an <code>int32</code> to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga0598088671f5ab3d9e6e8bb98f7ff58d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9139b33dc959cd4b8c6a14f584e74a9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaa9139b33dc959cd4b8c6a14f584e74a9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#gaa9139b33dc959cd4b8c6a14f584e74a9">o2_add_float</a> (float f)</td></tr>
<tr class="memdesc:gaa9139b33dc959cd4b8c6a14f584e74a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a <code>float</code> to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:gaa9139b33dc959cd4b8c6a14f584e74a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d1c0ae751f2476ed24cd1d9390ccaf4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3d1c0ae751f2476ed24cd1d9390ccaf4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga3d1c0ae751f2476ed24cd1d9390ccaf4">o2_add_symbol</a> (char *s)</td></tr>
<tr class="memdesc:ga3d1c0ae751f2476ed24cd1d9390ccaf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a symbol to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga3d1c0ae751f2476ed24cd1d9390ccaf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9224eba0599b751ce835c5b6639512b0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9224eba0599b751ce835c5b6639512b0"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga9224eba0599b751ce835c5b6639512b0">o2_add_string</a> (char *s)</td></tr>
<tr class="memdesc:ga9224eba0599b751ce835c5b6639512b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a string to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga9224eba0599b751ce835c5b6639512b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5dfaf0967f312d537907313ce999f83e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5dfaf0967f312d537907313ce999f83e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga5dfaf0967f312d537907313ce999f83e">o2_add_blob</a> (<a class="el" href="structo2__blob.html">o2_blob</a> *b)</td></tr>
<tr class="memdesc:ga5dfaf0967f312d537907313ce999f83e"><td class="mdescLeft">&#160;</td><td class="mdescRight">add an <code><a class="el" href="structo2__blob.html">o2_blob</a></code> to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga5dfaf0967f312d537907313ce999f83e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab03d3250a57ca5aa8f372532797e5227"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab03d3250a57ca5aa8f372532797e5227"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#gab03d3250a57ca5aa8f372532797e5227">o2_add_int64</a> (int64_t i)</td></tr>
<tr class="memdesc:gab03d3250a57ca5aa8f372532797e5227"><td class="mdescLeft">&#160;</td><td class="mdescRight">add an <code>int64</code> to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:gab03d3250a57ca5aa8f372532797e5227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga175eb0769bef5c20e5cbb3f77204ed0c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga175eb0769bef5c20e5cbb3f77204ed0c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga175eb0769bef5c20e5cbb3f77204ed0c">o2_add_time</a> (<a class="el" href="o2_8h.html#aa38553f092bb619d41d5b13020bcc21d">o2_time</a> t)</td></tr>
<tr class="memdesc:ga175eb0769bef5c20e5cbb3f77204ed0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a time (<code>double</code>) to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga175eb0769bef5c20e5cbb3f77204ed0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga055d42227e5f55d3757eebcdfa21ddcf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga055d42227e5f55d3757eebcdfa21ddcf"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga055d42227e5f55d3757eebcdfa21ddcf">o2_add_double</a> (double d)</td></tr>
<tr class="memdesc:ga055d42227e5f55d3757eebcdfa21ddcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a <code>double</code> to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga055d42227e5f55d3757eebcdfa21ddcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9a8f4d0fdbd28c9aa38e027cbd402a9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9a8f4d0fdbd28c9aa38e027cbd402a9c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga9a8f4d0fdbd28c9aa38e027cbd402a9c">o2_add_char</a> (char c)</td></tr>
<tr class="memdesc:ga9a8f4d0fdbd28c9aa38e027cbd402a9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a <code>char</code> to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga9a8f4d0fdbd28c9aa38e027cbd402a9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d3ad617a7c9d1280c8ad9a8df3cdbe1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga4d3ad617a7c9d1280c8ad9a8df3cdbe1"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga4d3ad617a7c9d1280c8ad9a8df3cdbe1">o2_add_midi</a> (uint8_t *m)</td></tr>
<tr class="memdesc:ga4d3ad617a7c9d1280c8ad9a8df3cdbe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a short midi message to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga4d3ad617a7c9d1280c8ad9a8df3cdbe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab66f59f3618a0ba42cd362a3f8b4f0de"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab66f59f3618a0ba42cd362a3f8b4f0de"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#gab66f59f3618a0ba42cd362a3f8b4f0de">o2_add_true</a> ()</td></tr>
<tr class="memdesc:gab66f59f3618a0ba42cd362a3f8b4f0de"><td class="mdescLeft">&#160;</td><td class="mdescRight">add "true" to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:gab66f59f3618a0ba42cd362a3f8b4f0de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaff02a1db1e842a8b4d7078a64f05aefe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaff02a1db1e842a8b4d7078a64f05aefe"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#gaff02a1db1e842a8b4d7078a64f05aefe">o2_add_false</a> ()</td></tr>
<tr class="memdesc:gaff02a1db1e842a8b4d7078a64f05aefe"><td class="mdescLeft">&#160;</td><td class="mdescRight">add a "false" to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:gaff02a1db1e842a8b4d7078a64f05aefe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga744026732f2fa10b2ca0ae0e05892758"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga744026732f2fa10b2ca0ae0e05892758"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga744026732f2fa10b2ca0ae0e05892758">o2_add_bool</a> (int i)</td></tr>
<tr class="memdesc:ga744026732f2fa10b2ca0ae0e05892758"><td class="mdescLeft">&#160;</td><td class="mdescRight">add "true" or "false" to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga744026732f2fa10b2ca0ae0e05892758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44e103ed6208e4214ccee8d795a6cb82"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga44e103ed6208e4214ccee8d795a6cb82"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga44e103ed6208e4214ccee8d795a6cb82">o2_add_nil</a> ()</td></tr>
<tr class="memdesc:ga44e103ed6208e4214ccee8d795a6cb82"><td class="mdescLeft">&#160;</td><td class="mdescRight">add "nil" to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga44e103ed6208e4214ccee8d795a6cb82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a12c62723dc61b96611ff99bcf0c914"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga8a12c62723dc61b96611ff99bcf0c914"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga8a12c62723dc61b96611ff99bcf0c914">o2_add_infinitum</a> ()</td></tr>
<tr class="memdesc:ga8a12c62723dc61b96611ff99bcf0c914"><td class="mdescLeft">&#160;</td><td class="mdescRight">add "infinitum" to the message (see <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>) <br /></td></tr>
<tr class="separator:ga8a12c62723dc61b96611ff99bcf0c914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14e2f1e2015d0a2ff419a719d3cc3382"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structo2__message.html">o2_message_ptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga14e2f1e2015d0a2ff419a719d3cc3382">o2_finish_message</a> (<a class="el" href="o2_8h.html#aa38553f092bb619d41d5b13020bcc21d">o2_time</a> time, char *address)</td></tr>
<tr class="memdesc:ga14e2f1e2015d0a2ff419a719d3cc3382"><td class="mdescLeft">&#160;</td><td class="mdescRight">finish and return the message.  <a href="#ga14e2f1e2015d0a2ff419a719d3cc3382">More...</a><br /></td></tr>
<tr class="separator:ga14e2f1e2015d0a2ff419a719d3cc3382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga476ecca0f729b1000fff76f2c32fe865"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#ga476ecca0f729b1000fff76f2c32fe865">o2_free_message</a> (<a class="el" href="structo2__message.html">o2_message_ptr</a> msg)</td></tr>
<tr class="memdesc:ga476ecca0f729b1000fff76f2c32fe865"><td class="mdescLeft">&#160;</td><td class="mdescRight">free a message allocated by <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>.  <a href="#ga476ecca0f729b1000fff76f2c32fe865">More...</a><br /></td></tr>
<tr class="separator:ga476ecca0f729b1000fff76f2c32fe865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf5370ca7246ea7c19fb27ed61eb40bc2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#gaf5370ca7246ea7c19fb27ed61eb40bc2">o2_finish_send</a> (<a class="el" href="o2_8h.html#aa38553f092bb619d41d5b13020bcc21d">o2_time</a> time, char *address)</td></tr>
<tr class="memdesc:gaf5370ca7246ea7c19fb27ed61eb40bc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a message allocated by <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>.  <a href="#gaf5370ca7246ea7c19fb27ed61eb40bc2">More...</a><br /></td></tr>
<tr class="separator:gaf5370ca7246ea7c19fb27ed61eb40bc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade26f9a1626b6f83875d577dfd19be5a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__lowlevelmsg.html#gade26f9a1626b6f83875d577dfd19be5a">o2_finish_send_cmd</a> (<a class="el" href="o2_8h.html#aa38553f092bb619d41d5b13020bcc21d">o2_time</a> time, char *address)</td></tr>
<tr class="memdesc:gade26f9a1626b6f83875d577dfd19be5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">send a message allocated by <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>.  <a href="#gade26f9a1626b6f83875d577dfd19be5a">More...</a><br /></td></tr>
<tr class="separator:gade26f9a1626b6f83875d577dfd19be5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Rather than passing all parameters in one call or letting O2 extract parameters from a message before calling its handler, these functions allow building messages one parameter at a time and extracting message parameters one at a time. The functions operate on "hidden" messages, so these functions are not reentrant.</p>
<p>To build a message, begin by calling <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a> to allocate a message. Then call one of the <code>o2_add_()</code> functions to add each parameter. Finally, call either <a class="el" href="group__lowlevelmsg.html#gaf5370ca7246ea7c19fb27ed61eb40bc2" title="send a message allocated by o2_start_send(). ">o2_finish_send()</a> or <a class="el" href="group__lowlevelmsg.html#gade26f9a1626b6f83875d577dfd19be5a" title="send a message allocated by o2_start_send(). ">o2_finish_send_cmd()</a> to send the message. You should not explicitly allocate or deallocate a message using this procedure.</p>
<p>To extract parameters from a message, begin by calling <a class="el" href="o2_8h.html#a1eef229b875a7bba3937a15df266a3af">o2_start_extract()</a> to prepare to get parameters from the message. Then call <a class="el" href="o2_8h.html#ac34a9f9e63aed88df7810ac3ad3180e6">o2_get_next()</a> to get each parameter. If the result is non-null, a parameter of the requested type was obtained and you can read the parameter from the result. Scalar results are only valid until the next call to <a class="el" href="o2_8h.html#ac34a9f9e63aed88df7810ac3ad3180e6">o2_get_next()</a>, so you should use or copy the value before reading the next one. String values are always in the message and have the same lifetime as the message. <a class="el" href="o2_8h.html#ac34a9f9e63aed88df7810ac3ad3180e6">o2_get_next()</a> will perform type conversion if possible when the requested type does not match the actual type. You can determine the original type by reading the type string in the message. The number of parameters is determined by the length of the type string. Normally, you should not free the message because normally you are accessing the message in a handler and the message will be freed by the O2 message dispatch code that called the handler. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga14e2f1e2015d0a2ff419a719d3cc3382"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structo2__message.html">o2_message_ptr</a> o2_finish_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o2_8h.html#aa38553f092bb619d41d5b13020bcc21d">o2_time</a>&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>finish and return the message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>the timestamp for the message (0 for immediate) </td></tr>
    <tr><td class="paramname">address</td><td>the O2 address pattern for the message</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the address of the completed message, or NULL on error</dd></dl>
<p>The message must be freed using <a class="el" href="group__lowlevelmsg.html#ga476ecca0f729b1000fff76f2c32fe865" title="free a message allocated by o2_start_send(). ">o2_free_message()</a> or by calling <a class="el" href="o2_8h.html#a4ca577c3b8c69ce9adf98902701f107d" title="Send an O2 message. (See also macros o2_send and o2_send_cmd). ">o2_send_message()</a>. </p>

</div>
</div>
<a class="anchor" id="gaf5370ca7246ea7c19fb27ed61eb40bc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int o2_finish_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o2_8h.html#aa38553f092bb619d41d5b13020bcc21d">o2_time</a>&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a message allocated by <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="o2_8h.html#abdd1c898b818fc47b744e42b401a3079" title="function was successful ">O2_SUCCESS</a> if success, <a class="el" href="o2_8h.html#a8f5f040b03042ee184f7f5bae734026d" title="an error return value: a non-specific error occurred. In general, any return value &lt;0 indicates an er...">O2_FAIL</a> if not.</dd></dl>
<p>This is similar to calling <a class="el" href="o2_8h.html#a89888680fab358a9fd579b581b1ce0b0" title="Construct and send O2 message with best effort protocol. ">o2_send()</a>, except you use a three-step process of (1) allocate the message with <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>, (2) add parameters to it using <code>o2_add_</code> functions, and (3) call <a class="el" href="group__lowlevelmsg.html#gaf5370ca7246ea7c19fb27ed61eb40bc2" title="send a message allocated by o2_start_send(). ">o2_finish_send()</a> to send it. </p>

</div>
</div>
<a class="anchor" id="gade26f9a1626b6f83875d577dfd19be5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int o2_finish_send_cmd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="o2_8h.html#aa38553f092bb619d41d5b13020bcc21d">o2_time</a>&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>send a message allocated by <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="o2_8h.html#abdd1c898b818fc47b744e42b401a3079" title="function was successful ">O2_SUCCESS</a> if success, <a class="el" href="o2_8h.html#a8f5f040b03042ee184f7f5bae734026d" title="an error return value: a non-specific error occurred. In general, any return value &lt;0 indicates an er...">O2_FAIL</a> if not.</dd></dl>
<p>This is similar to calling <a class="el" href="o2_8h.html#a7d5f27ee76bf479d53feccd35a13584b" title="Construct and send an O2 message reliably. ">o2_send_cmd()</a>, except you use a three-step process of (1) allocate the message with <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>, (2) add parameters to it using <code>o2_add_</code> functions, and (3) call <a class="el" href="group__lowlevelmsg.html#gade26f9a1626b6f83875d577dfd19be5a" title="send a message allocated by o2_start_send(). ">o2_finish_send_cmd()</a> to send it. </p>

</div>
</div>
<a class="anchor" id="ga476ecca0f729b1000fff76f2c32fe865"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void o2_free_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structo2__message.html">o2_message_ptr</a>&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>free a message allocated by <a class="el" href="group__lowlevelmsg.html#ga941ccda940ce31ada3f3b970d2b9e861" title="Prepare to build a message. ">o2_start_send()</a>. </p>
<p>This function is not normally used because O2 functions that send messages take "ownership" of messages and (eventually) free them. </p>

</div>
</div>
<a class="anchor" id="ga941ccda940ce31ada3f3b970d2b9e861"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int o2_start_send </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare to build a message. </p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="o2_8h.html#abdd1c898b818fc47b744e42b401a3079" title="function was successful ">O2_SUCCESS</a> if success, <a class="el" href="o2_8h.html#a8f5f040b03042ee184f7f5bae734026d" title="an error return value: a non-specific error occurred. In general, any return value &lt;0 indicates an er...">O2_FAIL</a> if not.</dd></dl>
<p>Allocates a "hidden" message in preparation for adding parameters. After calling this, you should call <code>o2_add_</code> functions such as <a class="el" href="group__lowlevelmsg.html#ga0598088671f5ab3d9e6e8bb98f7ff58d" title="add an int32 to the message (see o2_start_send()) ">o2_add_int32()</a> to add parameters. Then call <a class="el" href="group__lowlevelmsg.html#gaf5370ca7246ea7c19fb27ed61eb40bc2" title="send a message allocated by o2_start_send(). ">o2_finish_send()</a> or <a class="el" href="group__lowlevelmsg.html#gade26f9a1626b6f83875d577dfd19be5a" title="send a message allocated by o2_start_send(). ">o2_finish_send_cmd()</a> to send the message. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
